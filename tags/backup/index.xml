<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>backup on www.rolfje.com</title><link>https://realrolfje.github.io/rolfje.com/tags/backup/</link><description>Recent content in backup on www.rolfje.com</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><copyright>Copyright © rolfje.com</copyright><lastBuildDate>Sat, 07 Jan 2012 13:30:13 +0000</lastBuildDate><atom:link href="https://realrolfje.github.io/rolfje.com/tags/backup/index.xml" rel="self" type="application/rss+xml"/><item><title>Drobo FS Lion Time Machine Fix</title><link>https://realrolfje.github.io/rolfje.com/2012/01/07/drobo-fs-lion-time-machine-fix/</link><pubDate>Sat, 07 Jan 2012 13:30:13 +0000</pubDate><guid>https://realrolfje.github.io/rolfje.com/2012/01/07/drobo-fs-lion-time-machine-fix/</guid><description>
&lt;p>&lt;a href="http://www.youtube.com/watch?v=6xe7bIfj7VM">&lt;img src="drobo-bandaid.png" alt="">
&lt;/a>Many Drobo FS owners out there who upgraded to Lion were unpleasantly surprised by the fact that their Drobo no longer behaved like they used to. After months, drobo released new firmware, but it didn't improve things all that much. With the new firmware, the Drobo FS:&lt;/p>
&lt;pre>&lt;code> * is slow or entirely unresponsive, Time Machine backups don't finish at all or take days
* doesn't show up in the Finder of Lion Macbook owners connecting through wifi
* has a transfer speed of 20MB/s, even when connecting through GB Ethernet, regardless of OSX version (tested with Snow Leopard, Lion)
&lt;/code>&lt;/pre>
&lt;p>If you have one or more of the problems listed above, you will be pleased to hear that there is a &amp;quot;fix&amp;quot;, although it may not be what you were hoping for.&lt;/p>
&lt;p>&lt;strong>&lt;!-- more -->The Good&lt;/strong>
Late 2010 I discovered drobo. Until then, I had always managed my storage space myself, transferring data to &lt;a href="http://rolfje.wordpress.com/2008/09/07/a-bigger-timemachine-without-changing-history/">bigger disks&lt;/a> as time went on. The idea of a device which would automatically do that by just plugging in a new drive sounded like a real time saver. That, and the fact that it could handle a disk failure without data loss, and behave like network Time Machine share made me buy a Drobo FS.&lt;/p>
&lt;p>On December 19th 2010, I spent a whopping €615,- on a diskless Drobo, and threw another €300,- worth of 1TB disks in there, along with some old disks I had lying around.&lt;/p>
&lt;p>I moved all &lt;a href="http://rolfje.wordpress.com/2010/12/30/move-time-machine-data-to-a-drobo/">backups to the Drobo&lt;/a>. Life would be good. Or so I thought.&lt;/p>
&lt;p>&lt;strong>The Bad&lt;/strong>
The Drobo does what is called &lt;a href="http://en.wikipedia.org/wiki/Thin_provisioning">&amp;quot;Thin Provisioning&amp;quot;&lt;/a>. This means that it will tell your computer that it is 16TB in size, although physically it isn't. This means that when you run out of physical storage space, you replace one of the drives with a bigger one and your computer wouldn't even notice.&lt;/p>
&lt;p>When I created a Time Machine share on the drobo, I discovered that this was not entirely true. When you create a Time Machine share on the drobo, you must choose a size in order to keep Time Machine from filling up your drobo. But unlike other shares on the drobo, you can't change the size of the Time Machine share when you decide you need more room.&lt;/p>
&lt;p>I got over it, chose large enough Time Machine shares for all my machines, and everything worked fine for a couple of months. Performance wasn't great, particularly mounting the sparse bundles took quite some time and a lot of disk access on the drobo, but hey. It's seamless automated backup to a redundant disk array so it was acceptable.&lt;/p>
&lt;p>Skip forward to July 20th, 2011. The release date of OSX 10.7, Lion. Because I wanted to make sure everything still worked in Lion, I waited until September 2011 before upgrading my Macbook. My other machines are too old and are still running Leopard (OSX 10.5) or Snow Leopard (OSX 10.6).&lt;/p>
&lt;p>One of the reasons I had to wait until September was drobo. They didn't have their software ready for Lion, and drobo actually &lt;a href="http://halmueller.wordpress.com/2011/07/28/drobo-fs-problems-under-mac-os-x-lion/">tried to blame Apple for it&lt;/a>. Yes you read that right. The OSX Lion developer preview had been out since &lt;a href="http://www.apple.com/apple-events/october-2010/">October 20, 2010&lt;/a> but somehow drobo didn't seem to have bothered to check compatibility all that time, and as a result effectively bricked all drobo's for Lion users.&lt;/p>
&lt;p>&lt;strong>The Ugly&lt;/strong>
After the storm had passed, and Drobo released a firmware upgrade, I switched to Lion on my Macbook after installing the new firmware on the Drobo FS. The Lion upgrade went very smooth and I happily played with Lion's new features. After a few hours, I noticed that the Drobo stopped working. No backups. Yikes!&lt;/p>
&lt;p>The drobo wasn't visibile when connecting over wifi and at first Lion was blamed for this problem. But my Mac Mini running Snow Leopard also started complaining about not being able to backup. I filed my first drobo support call at 09/18/2011 04:46 AM with the title &amp;quot;New Drobo FS firmware doesn't work with Snow Leopard TimeMachine&amp;quot;.&lt;/p>
&lt;p>It was downhill from there. Drobo support had me throw away Time Machine shares (losing data), reset the whole drobo (losing ALL data on the drobo), install bleeding edge firmware which was not even available through the normal drobo dashboard, advised me to both up- AND downgrade the drobo and the dashboard, repeatedly closed my support calls without actually solving them, refused to answer to replies not coming from the first email address I used, had me send numerous diagnostic files to them, and told me &amp;quot;they were working on a new firmware&amp;quot; but never when it was scheduled for release.&lt;/p>
&lt;p>In less than 4 months, I exchanged more than 80 mails with Drobo Support, and the drobo had lost all my data 4 times. It had become more unreliable than any disk I had ever owned before. I was lucky to run backups-of-backups. The drobo may be able to handle drive failures, but the firmware developers and &lt;a href="http://www.stolensnapshots.com/dontdodrobo">drobo support people are a lot less worried about your data&lt;/a>.&lt;/p>
&lt;p>&lt;strong>The Fix&lt;/strong>
During these months, I struggled to keep my backups running. On December 13th 2011, I finally bit the bullet and fixed my drobo backup problems. If you want to fix your drobo Time Machine backup problems for once and for all, do the following:&lt;/p>
&lt;pre>&lt;code> 1. Connect to your drobo with an admin account, and using the Finder, copy all sparse bundles from all Time Machine shares to a location other than the drobo. Do the same for all other data you might have on there.
2. Go the the Apple store and [buy a Time Capsule](http://store.apple.com/us/product/MD032LL/A/Time-Capsule-2TB) (as a bonus, this also upgraded my wifi speed a great deal)
3. If you have just one machine you want to backup, plug it in and open Time Machine preferences on your Mac, and choose the Time Capsule as backup location. If you don't want to transfer your old backups, you're done.
4. For more technically inclined people, you can create encrypted and limited size sparse bundles for each of your machines on the TIme Capsule. Read [this article](http://michaelnozbe.com/mac-osx-lion-secure-backup-to-time-capsule-wi) by Michael &amp;quot;Nozbe&amp;quot; Sliwinski on how to do that. It works beautifully.
5. If you want to transfer the data in your old Time Machine sparse bundle from your drobo, you can use [this tip](http://www.unlikelywords.com/2009/01/05/moving-a-time-machine-backup-to-a-time-capsule/) to do that, but frankly I haven't tried that, I just created new, clean, backups.
6. Now go and sell your drobo to somebody who doesn't care about his data that much, or just wants a NAS for his Windows machine.
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="time-capsule.jpeg" alt="">
The Time Capsule has run beautifully out of the box, doesn't have a butt-ugly dashboard like the drobo's, and is actually faster over wifi than the drobo is over GB ethernet. Go figure.&lt;/p>
&lt;p>I really hope that some day, somebody will create a drobo-like product which actually works.&lt;/p>
&lt;p>P.S. If you like a challenge, you can actually already build a drobo-like fileshare with much higher performance at a lower cost by buying an HP proliant server, some disks, installing &lt;a href="http://en.wikipedia.org/wiki/OpenIndiana">OpenIndiana&lt;/a> on it and run a &lt;a href="http://en.wikipedia.org/wiki/ZFS">ZFS array&lt;/a>. A friend of mine has replaced his troublesome drobo with this setup and can reliably copy files to it at 120MB/s over GB ethernet, and swap out drives while he's doing that. Drobo isn't even close.&lt;/p></description></item><item><title>Replacing Dropbox with Spideroak</title><link>https://realrolfje.github.io/rolfje.com/2011/07/03/1355/</link><pubDate>Sun, 03 Jul 2011 14:39:30 +0000</pubDate><guid>https://realrolfje.github.io/rolfje.com/2011/07/03/1355/</guid><description>
&lt;p>&lt;a href="https://spideroak.com/">&lt;img src="spideroak-logo.gif" alt="">
&lt;/a>After lies about Dropbox Employees &lt;a href="http://www.businessinsider.com/dropbox-updates-security-terms-of-service-to-say-it-can-decrpyt-files-if-the-government-asks-it-to-2011-4?op=1">not being able to see your files&lt;/a>, then proving that they do &lt;a href="http://blog.dropbox.com/?p=821">not do regression testing&lt;/a> on their security, the latest &lt;a href="http://hardware.slashdot.org/story/11/07/02/0515218/Dropbox-TOS-Includes-Broad-Copyright-License">change in terms of service&lt;/a> really was the last drop. So I dropped dropbox.&lt;/p>
&lt;p>I had become dependent on Dropbox to transfer files between my private and work machines, having my notes, configuration files and (encrypted thank god) password databases handy at all times. Searching around, there is really no other service like it. Although lots of products claim to have the same functionality, the &amp;quot;share this folder between all my machines&amp;quot; feature which dropbox proviced is really unsurpassed.&lt;/p>
&lt;p>I had to find an alternative solution which would meet the following criterea:&lt;/p>
&lt;pre>&lt;code> 1. has to be a single, native folder, instantly syncing with all other machines
2. has to be free or *really* cheap, minimum 2GB
3. has to use an encryption technology where no one else can ever read my files, not even the hosting party, not even at gunpoint
4. has to have client software for Windows, Mac and Linux
5. accessing data on my iPhone would be a nice bonus.
&lt;/code>&lt;/pre>
&lt;p>After some browsing around, there are two solutions that come close, one is &lt;a href="http://www.wuala.com/">Wuala&lt;/a>, and the other is &lt;a href="https://spideroak.com/download/referral/4b01a22f64d398afbd846637080bd2b4">Spideroak&lt;/a>.&lt;/p>
&lt;blockquote>For **one additonal GB of storage for life, [use my referal link](https://spideroak.com/download/referral/4b01a22f64d398afbd846637080bd2b4)** to register at SpiderOak. Read the whole article to add another 5GB to that.&lt;/blockquote>
&lt;p>&lt;strong>&lt;!-- more -->Why not Wuala?&lt;/strong>
Wuala looked really cool at first. It looked like they had a native Mac app, and easy syncing between computers. As it turns out, it's nastier than that. The Mac client is effectively a slow Java program in which you need to drag and drop your files to get them uploaded/downloaded. That's not seemless. There is a MacFUSE client that comes with the download, but that affectively makes Wuala into a seperate drive (not a local folder), and the MacFUSE client is low on support, and not compiled as 64bit runtime.&lt;/p>
&lt;p>Scanning the Wuala forums, there seemed too much confusion and bugs around the whole software product. Being made by a hardware manufacturer, that doesn't really surprise me.&lt;/p>
&lt;p>Spideroak has native clients for all platforms, and ticks all the boxes in my requirements list, really &lt;a href="https://spideroak.com/engineering_matters#true_privacy">nailing it in the security department&lt;/a>. Spideroak even conforms to my &lt;a href="http://rolfje.com/2007/12/19/if-not-https-then-exit/">&amp;quot;https please&amp;quot;&lt;/a> blogpost. A bit of poking around revealed that it is written in Python, and knowing that you can spot some Qt UI elements.&lt;/p>
&lt;p>&lt;strong>Enough talk. How do I get my magically synced folder back?&lt;/strong>
Spideroak is really targeted at backup, and has &amp;quot;sync&amp;quot; as a feature. So in order to get only syncing working, you need to setup a backup for that folder. Don't worry, here are all the steps you need to take to migrate from dropbox to Spideroak:&lt;/p>
&lt;pre>&lt;code> 1. Cancel your dropbox account as described on the [dropbox help pages](http://www.dropbox.com/help/43).
2. Uninstall dropbox from all your machines. Please note that this will not remove your dropbox folder. Your data will be safe. We can only hope that dropbox will remove that data from their servers, but I wouldn't bet on it.
3. Rename your &amp;quot;dropbox&amp;quot; folder into &amp;quot;Spideroak&amp;quot; if you really want to remove all dropbox references.
4. [Sign up at Spideroak with this referal link](https://spideroak.com/download/referral/4b01a22f64d398afbd846637080bd2b4), and use the promocode &amp;quot;worldbackupday&amp;quot; to increase your storage for free to 5GB for one year, PLUS 1GB of free storage if you used my referal link. That's a total of 6 free GB!
5. Download the client for your platform(s) and install it on all machines where you had dropbox running (no reboot required).
6. After installation, click on the &amp;quot;backup&amp;quot; tab, click on the &amp;quot;advanced&amp;quot; button on the right, and select your Spideroak (former dropbox) folder. Click save. Spideroak should now start backing up that folder.
&lt;/code>&lt;/pre>
&lt;p>&lt;a href="1-backup-tab.png">&lt;img src="1-backup-tab.png?w=300" alt="Selecting the sync folder for backup">
&lt;/a>
7. Syncing this folder with other computers is a bit strange in Spideroak, since you need to &amp;quot;pair&amp;quot; folders. I choose to have one &amp;quot;central&amp;quot; computer, which is my Mac Mini, which is always on and will serve as the &amp;quot;center&amp;quot; of the synchronization setup. It does not have to be always on, it's just administrative convenience. You will not notice the difference later on, don't worry.
8. Repeat the installation process on any other computer you removed dropbox from.
9. Now for the crucial part: On one of your computers, click on the &amp;quot;Sync&amp;quot; tab and connect all the Spideroak folders on your machines in one sync job.
&lt;a href="spideroak-sync.png">&lt;img src="spideroak-sync.png" alt="How to synchronize multiple machines with Spideroak">
&lt;/a>&lt;a href="2-sync-tab.png">
&lt;/a> In the screenshot above I have four machines/devices. To add a fifth, I would have to click the little &amp;quot;+&amp;quot; to add a sync folder and select the folder on the fifth machine.
10. Once the backup is complete, Spideroak will start syncing all your synced folders to all machines.&lt;/p>
&lt;p>If everything went as planned,  Spideroak will now act as dropbox. You'll have a local folder where you can put stuff in, and it will get magically transferred in the background to all your devices. Please note that this will not be as fast as you were used to with dropbox.&lt;/p>
&lt;p>I've written a feature request to Spideroak to make a simple client which just syncs a folder to &lt;em>any&lt;/em> machine in the account, without exposing all this setup trickery to the end user. If you want to help promote that feature request, drop them a line and refer to ticket &lt;strong>[SOS #56358]&lt;/strong>. Because in the end, all the world wants is a safe, simple dropbox.&lt;/p>
&lt;p>From now on, you never have to worry about the brilliant people who invented dropbox, surrounded by the incompitent idiots and lawyers which will ruin the company for good.&lt;/p>
&lt;p>Goodbye dropbox, sorry to see you go.&lt;/p></description></item><item><title>Move Time Machine data to a Drobo</title><link>https://realrolfje.github.io/rolfje.com/2010/12/30/move-time-machine-data-to-a-drobo/</link><pubDate>Thu, 30 Dec 2010 21:05:10 +0000</pubDate><guid>https://realrolfje.github.io/rolfje.com/2010/12/30/move-time-machine-data-to-a-drobo/</guid><description>
&lt;p>&lt;a href="http://www.youtube.com/watch?v=6xe7bIfj7VM">&lt;img src="time-machine-drobo.png" alt="Remember, even Drobo's can die. Make sure your files are in at least three different physical locations, one of which preferably off-site.">
&lt;/a>If Santa treated you particularly well this season, or you have put some of your savings to good use, chances are that you have a brand-new Drobo looking at you right now. Meanwhile, your Mac is happily making Time Machine backups to that trusty old local USB disk. So you want to use that new Drobo for Time Machine backups, but don't want to loose history? Here's how (baby steps, no tools required, screenshots included):&lt;/p>
&lt;!-- more -->
&lt;pre>&lt;code> 1. Connect the Drobo (in my case a Drobo FS) to the network and configure an Administrator password for it. You should now have a working Drobo, with at least 2 drives in it, and it shares a &amp;quot;Public&amp;quot; share on the network.
2. Make sure that the free space reported by the Drobo Dashboard is at least as big as your old USB Time Machine drive. Add drives to the Drobo as needed.
3. In the Drobo Dashboard, click on &amp;quot;Advanced Controls&amp;quot;, go to the &amp;quot;Tools&amp;quot; tab, click on &amp;quot;Settings...&amp;quot; and then select the &amp;quot;Shares&amp;quot; tab.
4. Create a new user for your Time Machine backup. It's important to create a non-admin user to keep your data safe. Trust me, you'll thank me later.
5. Create a new Drobo share (the &amp;quot;+&amp;quot; on the bottom left), give it a meaningful name and select &amp;quot;Enable Time Machine on this drive&amp;quot;. Be careful in choosing the size, you can't change this later!
6. Remove &amp;quot;Everyone&amp;quot; from the allowed users for this share (the &amp;quot;-&amp;quot; bottom right) and add the user you just created (the &amp;quot;+&amp;quot; on the bottom right). You should now have something like this:[![Create Time Machine share on the Drobo FS screenshot](schermafbeelding-2010-12-28-om-20-03-55.png?w=300)
&lt;/code>&lt;/pre>
&lt;p>](schermafbeelding-2010-12-28-om-20-03-55.png)
7. Close Drobo Dashboard, we won't be needing it anymore.
8. Open System Preferences on your Mac, and select &amp;quot;Time Machine&amp;quot;
9. Click on the &amp;quot;Select Disk&amp;quot; option. Don't worry, we're not damaging or loosing your existing backup by doing this.
10. In the popup, you'll see your newly created Time Machine share on the Drobo. Select this share and fill in the Userid and Password you just created on the Drobo.&lt;a href="schermafbeelding-2010-12-28-om-20-05-39.png">&lt;img src="schermafbeelding-2010-12-28-om-20-05-39.png" alt="Select Drobo Time Machine share">
&lt;/a>
11. Wait for Time Machine to start, or force it by using the &amp;quot;Backup now&amp;quot; menu option. Time Machine will first try to create a sparse bundle and calculate what to back up. As soon as you see the backup starting (the &amp;quot;zebra&amp;quot; stripes turn into a normal progress bar), click on the cancel button. We only used Time Machine to create a sparse bundle with the correct settings.
12. In System Preferences, switch Time Machine off.
13. Go to the Drobo Time Machine share you just created and mount the sparse bundle you see there.
14. Open Disk Utility and select the USB Time Machine disk.
15. Click on &amp;quot;Restore&amp;quot; and drag the partition of the old USB Time Machine drive to the &amp;quot;Source&amp;quot; box. Drag the partition on the mounted Drobo Time Machine disk to the &amp;quot;Destination&amp;quot; box. Double check my screen shot, it's important to get this right. Drag the partitions, not the disks itself. If you're not able to drag the disks as described, you may want to unmount your old Time Machine drive, remount it, and restart Disk Utility.&lt;a href="schermafbeelding-2010-12-28-om-20-17-22.png">&lt;img src="schermafbeelding-2010-12-28-om-20-17-22.png" alt="Drag partitions in Disk Utility">
&lt;/a>
16. Make sure &amp;quot;Erase Target&amp;quot; is selected and press &amp;quot;Restore&amp;quot;. Disk Utility may ask for your password.
17. Prepare for a long wait. If you have more than a 500GB backup drive, you wish you had invested in Gigabit Ethernet right now (yes that speeds it up tremendously). My restore of 800GB over a 100Mb network took more than 2 days.
18. Once the process is finished, do not forget to switch Time Machine back on in the System Preferences.&lt;/p>
&lt;p>That's it. Time Machine will automatically mount the Drobo Share if needed. The first backup will take a bit more time, I think Apple built in a file check to see if the backup is still ok after moving it to another disk.&lt;/p>
&lt;p>&lt;em>&lt;strong>Tip 1:&lt;/strong> Keep your old USB Time Machine disk next to the Drobo, even if you have an empty slot. By doing this, you can instantly replace a faulty drive without running to the store. Always keep a spare!&lt;/em>&lt;/p>
&lt;p>&lt;em>&lt;strong>Tip 2:&lt;/strong> Storing data on your Drobo, and then backing up to a Time Machine bundle on that same Drobo is not a backup. A file is only safe if it is stored in 3 different physical locations, one of which is preferably off-site.&lt;/em>&lt;/p>
&lt;p>Happy Drobo days!&lt;/p></description></item><item><title>A Bigger Time Machine without Changing History</title><link>https://realrolfje.github.io/rolfje.com/2008/09/07/a-bigger-timemachine-without-changing-history/</link><pubDate>Sun, 07 Sep 2008 20:31:15 +0000</pubDate><guid>https://realrolfje.github.io/rolfje.com/2008/09/07/a-bigger-timemachine-without-changing-history/</guid><description>
&lt;p>I had a 160GB drive holding my &lt;a href="http://rolfje.wordpress.com/2007/12/11/backup-guru-give-me-a-break/">Time Machine backups&lt;/a>. Because I wanted to backup external disks, and still wanted to be able to travel about a year back in time, I bought a &lt;a href="http://rolfje.wordpress.com/2008/09/07/osx-format-1tb-usb-drive/">1TB USB disk&lt;/a>. Stephen Foskett wrote a &lt;a href="http://blog.fosketts.net/2008/07/26/how-to-move-os-x-time-machine-backups-to-a-new-disk/">great article&lt;/a> about how he migrated his TimeMachine backup to a larger disk, but it's lengthy and misses one essential step.&lt;/p>
&lt;p>I decided to give you the short version, this blog post describes how I migrated Time Machine to the new disk without losing any data in 11 easy steps.&lt;/p>
&lt;!-- more -->
&lt;pre>&lt;code> 1. Get a new, big, empty drive with a single Mac Journaled partition on it. Give it a good name so you can keep it apart from the original Time Machine drive.
2. Open the Time Machine configuration screen, and turn off Time Machine.
3. Unmount and remount the Time Machine drive, it should show up as an ordinary orange drive on your desktop.
4. Open Disk Utility, and click the &amp;quot;Restore&amp;quot; Tab.
5. [![](copy-timemachine-drive.png)
&lt;/code>&lt;/pre>
&lt;p>](copy-timemachine-drive.png)Drag the &amp;quot;TimeMachine&amp;quot; partition which is on the old drive to the &amp;quot;Source&amp;quot; box.
6. Drag the large partition on the new drive to the &amp;quot;Target&amp;quot; box.
7. Select &amp;quot;Erase Target&amp;quot;. If you do not check this, the disc copy will fail. This is the essential step I mentioned earlier.
8. Click &amp;quot;Restore&amp;quot;, double check the popup warning to see if you are doing the right thing and press &amp;quot;Restore&amp;quot; again. After a number of hours, depending on the speed of your USB hub and the size of the disks, you will see 2 identical drives on your desktop. The new drive should have a lot more space available. In my case, it took 5 hours to migrate 160GB to the new drive.
9. Unmount the old Time Machine drive, physically disconnect it to be sure.
10. Open the Time Machine configuration screen, and turn on Time Machine.
11. In the Time Machine configuration screen, press &amp;quot;Change drive&amp;quot; and select the new drive. You will see the disk icon turn into the green TimeMachine drive icon. You're done.&lt;/p>
&lt;p>You can test Time Machine now by clicking the Time Machine icon in your dock and see that you still have all your history. Once you've verified that all your history is still there, you can use your old Time Machine drive for something else (reformat it).&lt;/p>
&lt;p>You might also want to check your spotlight settings to not include your Time Machine drive for searching. Because I did not touch the volume name on the new drive, I didn't have to change any settings, but I checked to be sure.&lt;/p>
&lt;p>&lt;strong>Bonus tip:&lt;/strong>
Now that you've got a large backup drive, maybe it's time to think about backing up your external drives. Make sure all the drives you want to backup are connected, and open the Time Machine configuration screen. Click on &amp;quot;Options...&amp;quot; and remove the drives you want to back up from that list.&lt;/p></description></item><item><title>Clone Windows HD on Apple OSX machine</title><link>https://realrolfje.github.io/rolfje.com/2008/06/06/clone-windows-hd-on-apple-osx-machine/</link><pubDate>Fri, 06 Jun 2008 21:07:34 +0000</pubDate><guid>https://realrolfje.github.io/rolfje.com/2008/06/06/clone-windows-hd-on-apple-osx-machine/</guid><description>
&lt;p>Last week, lightning struck at my parents apartment building (literaly). Other damages aside, my dad's PC also died.&lt;/p>
&lt;p>The guy at the PC repair shop warned my dad that &lt;em>&amp;quot;we may need to wipe the HD, do you have a backup&amp;quot;?&lt;/em> Ofcourse, all data was backed up daily and &amp;quot;off-site&amp;quot; at my house so all important data was safe. But just in case, we wanted to make an exact disk image of the drive, so that we could easily restore it when the PC returns from the store&lt;/p>
&lt;!-- more -->I wanted to have a future proof process, run on a Mac, something as follows:
&lt;pre>&lt;code> 1. Make an image file of the complete source harddisk including all partitions (in our case there were 3 NTFS partitions on the disk). The image file includes any boot records or loaders if they exist, and is an Apple DMG file so it can be mounted on OSX.
2. Store the image file on a server disk (so it in turn gets backed up)
3. When there's trouble, we now have 2 options, which are
&lt;/code>&lt;/pre>
&lt;p>a) mount the image and restore 1 or 2 important files
b) write/restore the image to a new disk&lt;/p>
&lt;p>So we bought a second 500GB drive to play around with, and try the restores on.&lt;/p>
&lt;p>With the Mac Disk Utility, I made an &amp;quot;MBR&amp;quot; disk image of a drive. Mounting this image gave me the access to all 3 NTFS partitions and data on them. However, for some strange reason, Disk Utility could not restore it's own disk image to the drive,  because it does not allow me to drag the target disk into the target disk field (use google to find more people having this problem). Mucking around with the command line tool &lt;a href="http://en.wikipedia.org/wiki/Dd_(Unix)">&amp;quot;dd&amp;quot;&lt;/a>, I actually managed to restore the DMG back onto a physical drive, but for some reason, the primary partition was damaged.&lt;/p>
&lt;p>Digging around on the internet, I found that the following method may be the only reliable way to do this and meet all my requirements. It's relatively simple, although it does take a trip to the command line (which is really not very Apple like).&lt;/p>
&lt;p>&lt;strong>Backup the DRIVE, not a PARTITION&lt;/strong>&lt;/p>
&lt;p>What Apple calls a &amp;quot;drive&amp;quot; or &amp;quot;disk&amp;quot; is actually often just a partition on a physical disk. A physical disk can have multiple partitions, which appear as multiple &amp;quot;disks&amp;quot; in the Finder or Disk Utility. Because we want to make an image of the physical disk, we need to find out where that disk is. In the Terminal, use to following command:&lt;/p>
&lt;pre>&lt;code>diskutil list
&lt;/code>&lt;/pre>
&lt;p>You'll get a list of all the physical drives, and the partitions which are on there. For example, our testdisk shows up as follows:&lt;/p>
&lt;pre>&lt;code>/dev/disk3
   #:                   TYPE NAME      SIZE     IDENTIFIER
   0: FDisk_partition_scheme          *465.8 Gi disk3
   1:             DOS_FAT_32 TESTDISK 465.8 Gi disk3s1
&lt;/code>&lt;/pre>
&lt;p>The physical disk is known to the system as /dev/disk3, and the first (and only) pastition on there is a FAT32 partition, and the name of the partition is TESTDISK. To make a DMG of the complete disk with all it's partitions, the following command is enough:&lt;/p>
&lt;pre>&lt;code>dd if=/dev/disk3 of=/Users/rolf/MyCompleteDisk100GB.dmg
&lt;/code>&lt;/pre>
&lt;p>The command will take a (long, long) while to complete. I've read some posts where people were waiting for days for dd to complete their image. There's also no progress bar. Terrible, but for now I can't help you with this without getting into rediculous trickery as found on some &lt;a href="http://www.youtube.com/watch?v=_b1cyNigny8">l33tsp34k&lt;/a> hippie h4xor blogs out there.&lt;/p>
&lt;p>The fun thing about this trick is, that OSX is able to mount that DMG file. You just double-click it, and &amp;quot;&lt;a href="http://www.boomcounter.org/">boom&lt;/a>&amp;quot;. There are your partitions. A big problem is that these images are uncompressed. So you'll need 500GB free space to backup a 500GB drive. That's not funny. You can circumvent that by having the data zipped before writing it to disk but that means you'll not be able to mount it.&lt;/p>
&lt;p>Writing it in compressed form (which is even slower) can be done like so:&lt;/p>
&lt;pre>&lt;code>dd if=/dev/disk3 | gzip -9 &amp;gt; /Users/rolf/MyCompleteDisk100GB.dmg.gz
&lt;/code>&lt;/pre>
&lt;p>&lt;strong>Restore the DRIVE (not the partition)&lt;/strong>&lt;/p>
&lt;p>To restore a dmg onto a physical disk, get a disk which is at least the size as the original disk. Having the original disk's size in the filename like in the example above helps you to remember that in a few months.&lt;/p>
&lt;p>After checking which disk you need to write to with the diskutil (as shown abve), restoring an uncompressed disk image merely requires you to swap input and output parameters, like so:&lt;/p>
&lt;pre>&lt;code>dd if=/Users/rolf/MyCompleteDisk100GB.dmg of=/dev/disk3
&lt;/code>&lt;/pre>
&lt;p>Please note that this works because in my case I haven't rebooted or reconnected drives, so the drive I need to write to is still /dev/disk3.&lt;/p>
&lt;p>If you did the gzip compression trick mentioned above, you need to get a bit more fancy:&lt;/p>
&lt;pre>&lt;code>cat /Users/rolf/MyCompleteDisk100GB.dmg.gz | gzip -d | dd of=/dev/disk3
&lt;/code>&lt;/pre>
&lt;p>Although all of this works, I hope that somebody, somewhere can show me a simple, clean, OSX native, GIU based solution to this, meeting the 3 requirements in this article.&lt;/p></description></item><item><title>File does not exist?</title><link>https://realrolfje.github.io/rolfje.com/2008/04/22/file-does-not-exist/</link><pubDate>Mon, 21 Apr 2008 20:36:20 +0000</pubDate><guid>https://realrolfje.github.io/rolfje.com/2008/04/22/file-does-not-exist/</guid><description>
&lt;p>For those people who have had problems accessing their files today, I remind you of the very old saying:&lt;/p>
&lt;p>&lt;strong>&amp;quot;A file does not exist until it exists in two places&amp;quot;&lt;/strong>&lt;/p>
&lt;p>Naturaly, this means on two different physical places, preferably miles apart.&lt;/p></description></item><item><title>Time Machine to the Rescue</title><link>https://realrolfje.github.io/rolfje.com/2008/02/21/time-machine-to-the-rescue/</link><pubDate>Wed, 20 Feb 2008 20:54:07 +0000</pubDate><guid>https://realrolfje.github.io/rolfje.com/2008/02/21/time-machine-to-the-rescue/</guid><description>
&lt;p>Hi, I just wanted to share with you that I actually recovered a mail item which I had written in Thunderbird for Windows with Time Machine. Yes, Apple's &lt;a href="http://rolfje.wordpress.com/2007/12/11/backup-guru-give-me-a-break/">Time Machine&lt;/a>.&lt;/p>
&lt;!-- more -->At work, we use Windows XP machines. Because I hate to wait 4 weeks for my mail program to load, I use [Thunderbird](http://www.mozilla-europe.org/nl/products/thunderbird/). When I'm on the road, I ocasionally use webmail access, so I have Thunderbird setup so that it connects to the mailserver using [IMAP](http://nl.wikipedia.org/wiki/Internet_Message_Access_Protocol). By doing this, my mail is always on the mail server.
&lt;p>Last week I saved a Draft mail containing some bugs in an application. My intention was to update this mail all week with new bugs, and send it out by the end of the week so that the reciever had a neat little list. By the end of the week however, I noticed that my Drafts folder was containing all kinds of old mail, and I decided to clean it out by &amp;quot;Crtl-A&amp;quot; - &amp;quot;Delete&amp;quot;. I went home with an empty Drafts folder, not realizing I had also deleted the Draft mail with the list of bugs.&lt;/p>
&lt;p>By Sunday, I decided to send out the mail with the list of Bugs, and before I touched a computer it had hit me: I had deleted all my drafts! I sat down behind my trusty Mac Mini, settled on re-typing the whole list, but then I had a brilliant idea. My Apple runs Leopard, and the Mail program also connects through IMAP to the mailserver at work. So without me noticing, &lt;a href="http://www.apple.com/macosx/features/mail.html">Mail.app&lt;/a> had been fetching my mail all week, and Time Machine had been making backups all week. So I navigated to the &amp;quot;Drafts&amp;quot; folder, pressed the Time Machine icon, and 2 simple mouseclicks later I had found and restored that email I deleted.&lt;/p>
&lt;p>I sent it out and needless to say I am a very happy camper. Today was a bit less succesful, I forgot to sleep my Apple so Mail.app was periodically fetching my mail. At work, Thunderbird disconnects when that happens so I was constantly re-connecting while reading and writing mail. Oh well, at least everything is backed up :-)&lt;/p></description></item><item><title>Backup Guru? Give me a break</title><link>https://realrolfje.github.io/rolfje.com/2007/12/11/backup-guru-give-me-a-break/</link><pubDate>Mon, 10 Dec 2007 21:27:41 +0000</pubDate><guid>https://realrolfje.github.io/rolfje.com/2007/12/11/backup-guru-give-me-a-break/</guid><description>
&lt;p>Today I listened to a podcast called &lt;a href="http://formaceyesonly.blogspot.com/">&amp;quot;For Mac Eyes Only&amp;quot;&lt;/a>, in which people were complaining about how &lt;a href="http://en.wikipedia.org/wiki/Time_Machine_%28Apple_software%29">Time Machine&lt;/a> does not work &amp;quot;the way they want it to&amp;quot;. I think this is utter crap, and I will explain why.&lt;/p>
&lt;!-- more -->To start off, I think I am safe to say that 99% of the people complaining about Time Machine's behaviour did not do backups of any kind at all, until Time Machine came along and "ruined their backup scheme".
&lt;p>Because of my work as a software engineer, people tend to consult me with their PC/Mac problems. More than once, these problems concern lost files, and no backup whatsoever. I think that in the past 10 years of my life, I have only spoken to 2 people who had an actual working automated backup schedule/scheme. Maybe 3 people made occasional backups to CD, of which 1 painfully discovered that CD's don't last forever.&lt;/p>
&lt;p>The copy-cat complainers about Time Machine, are easily put off by the question &amp;quot;What did you backups with before today?&amp;quot;. Usually this question results in stuttering and a lot of &amp;quot;uhhhmm&amp;quot;s and then some vague excuse about forgetting to buy CD's and what a hassle manual backups are. These people need to loose more data to understand the problem.&lt;/p>
&lt;p>Then, there are the &amp;quot;techies&amp;quot; who claim that Time Machine is technically inferior, lacks intricate timing and retentioning schemes, and that it's not an &amp;quot;off site&amp;quot; backup. I'll try to answer some of those questions because I think Time Machine is absolutely the best thing that has hapenned to the computing industry in decades since the introduction of OSX.&lt;/p>
&lt;p>&lt;strong>Time Machine can not be scheduled&lt;/strong>&lt;/p>
&lt;p>Totally true. And that's exactly a good thing. The Time Machine scheduling is one backup every hour. This is way better than any of the companies I have ever worked at, and way better than any of the client companies I worked for. Servers are usually backed up once a day. With Time Machine, you will not loose more than 1 hour of work, which is amazing by industry standards.&lt;/p>
&lt;p>Designing your own backup schedule to &amp;quot;not interfere with your working hours&amp;quot; will make it more likely that your backup will not run at all, or will run immediately when you turn on the computer because it missed a slot.&lt;/p>
&lt;p>&lt;strong>Time Machine does not do block-level backups&lt;/strong>&lt;/p>
&lt;p>Many commercial backup programs can do block-level backups. This means that they are backing up only those parts of your files that are modified. Because these blocks need to be reconstructed into files when restoring them, you'll need the proprietary software to make a restore.&lt;/p>
&lt;p>With Time Machine, a changed file gets backed up entirely. Although this will cost a bit more room on the backup disk, it gives you the option to take the backup disk to another computer, mount it and search for files in your backup tree. A &amp;quot;restore&amp;quot; is nothing more than a drag-and-drop of the file to any computer you like. Not depending on Time Machine, you can restore files from your Leopard machine to any machine capable of reading your USB drive!&lt;/p>
&lt;p>&lt;strong>Time Machine will not create bootable backups&lt;/strong>&lt;/p>
&lt;p>And that's a good thing too. People tend to be lazy. Suppose Time Machine made a bootable image of your harddrive. This would mean that as soon as you crash your drive, you can boot into your backup drive and carry on with your work. By doing that, you no longer have a backup process in place for the new work you are doing. Because a system restore is a drag, you'll continue to work from the backup drive, up until the point that you crash that one too, and realize that you have no backup of your backup drive.&lt;/p>
&lt;p>A complete system restore from a Time Machine backup is as simple as putting in the Leopard DVD, boot, and tell the installer to do a restore. It will install a fresh OS, and then restore all of your files, up until the point that you can no longer tell that you did a new install. From your mail, to your bookmarks, to even the locations of the icons of your desktop will be the same as you left it.&lt;/p>
&lt;p>The need for a bootable backup is very rare. Most of the time you'll use Time Machine to restore that one file, mail or photo you accidentally deleted. That's what it does the best.&lt;/p>
&lt;p>&lt;strong>Time Machine backups aren't &amp;quot;off-site&amp;quot; backups&lt;/strong>&lt;/p>
&lt;p>No, Time Machine does not place your backups on a disk somewhere in India. If you'd like to do that, I'd recommend writing an rsync script and sync to a remotely mounted DMG file over a secure network connection. Time Machine is not meant for saving you when your house burns down.&lt;/p>
&lt;p>That having said, it is expected that Apple will re-implement the backup-to-network-drive feature of Time Machine, and by doing that, your backup can be anywhere on your network, and that enables you to do interesting things...&lt;/p>
&lt;p>&lt;strong>I can't explain backups to my aunt Bessie&lt;/strong>&lt;/p>
&lt;p>&lt;a href="afbeelding-2.png">&lt;img src="afbeelding-2.thumbnail.png" alt="Time Machine Settings">
&lt;/a>Now that is just plain nonsense. There is almost no user interface to Time Machine. Making Time Machine work actually requires nothing more than plugging in a drive, and clicking &amp;quot;yes&amp;quot; in the dialog window that pops up, asking you if you'd like to use this drive as a backup drive. For the non-believers, you can see the Time Machine settings pane at the right. Yes, that's right, it has an on-off switch. Complex, no?&lt;/p>
&lt;p>Not being a computer wizzard, your aunt Bessie has probably lost or misplaced a file more than once, maybe even up to the point that she's actualy afraid to use the computer because &amp;quot;it looses her files&amp;quot;. Besides learning her to use &lt;a href="http://en.wikipedia.org/wiki/Spotlight_(software)">spotlight&lt;/a>, you can show how Time Machine can easily be used to restore that file for her.&lt;/p>
&lt;p>In stead of complaining about the bits that actually make Time Machine a good backup system in the first place, get people to do backups! Even if it isn't by using Time Machine.&lt;/p>
&lt;p>So, one last time:&lt;/p>
&lt;h2 id="shut-up-and-back-up-">**Shut up and back up! **&lt;/h2>
&lt;p>(And for professionals in the fiels there is an additional excercise: &lt;strong>Do a restore test every now and then!&lt;/strong> You'll be surprised at how much data you can not recover from your intricate full/incremental tape-cycling high-tech backup plan.)&lt;/p></description></item><item><title>No Such Thing: Harddisk Warranty</title><link>https://realrolfje.github.io/rolfje.com/2007/10/24/no-such-thing-harddisk-warranty/</link><pubDate>Wed, 24 Oct 2007 19:54:50 +0000</pubDate><guid>https://realrolfje.github.io/rolfje.com/2007/10/24/no-such-thing-harddisk-warranty/</guid><description>
&lt;p>A while ago the drives in my fileserver (PPC Mac Mini) began dying on me, one after one. The disks were somewhat old (approx. 4 years) so I replaced them with 2 new Maxtor 500GB USB drives, and restored all data from my backups. The server came up and looked and worked like it had never died, but now had more diskspace.&lt;/p>
&lt;p>After a few months of trouble free operation, one of the Maxtor disks seemed to have died this morning. I had kept the receipt, so I thought I'd get the drive and bring it in for repairs, because after all, this is well within the warranty period. While disconnecting the drive, it occured to me that I could never bring that harddisk in for repairs, particularly if I was not able to access it.&lt;/p>
&lt;!-- more -->Why? Because of the data on that disk. My iTunes library, purchased software and licenses, family pictures and taxes, everything is on there. Sure I have a backup, but what are the people in the store going to do with my data? No matter how you think about it, the disk is probably going to be checked by a store employee, and maybe later by a technician at the repair shop. Who's to say that these people don't steal my data?
&lt;p>The easiest target would be &amp;quot;casually copying&amp;quot; my music because that's what people do nowadays without seeing any harm in it. On my disk are more than a few iTunes DRM-free tracks which can be copied off there. These tracks are not DRM-ed, but they do contain information about me purchasing them. Should these tracks be found on the internet, the problem is mine, because I can never prove that I did &lt;em>not&lt;/em> put them there. Still my name is in there. This is the simplest scenario, but imagine what a clever person could do with your tax forms, or your personal foto's, or legally bought license keys...&lt;/p>
&lt;p>The whole point is, that there effectively is no such thing as harddisk warranty, because you can't turn in your disk exactly for the reasons described above. After realizing this, the only tactics I can advise are:&lt;/p>
&lt;pre>&lt;code> 1. 8% of all harddisks die within the first 2 years of operation, according to some [research done by Google](http://tastyresearch.wordpress.com/2007/08/09/hard-drive-failure-statistics-at-google/) on a large set of disks. Harddisks do not die because of heat or use. So the only thing you can do after you buy a harddisk, is test it by writing to all sectors, erasing, and making some partitions with useless data. You can use [Disk Utility](http://en.wikipedia.org/wiki/Disk_Utility) for this for example.
2. After you've tested it and it prooved to be working, start using the disk normally and hope that noting happens. Backup. Backupbackup. Backup. Backup. I have absolutely no mercy for people who did not make backups. Don't call me if you loose data because you did not have backup plan. Backups are the Airbags, seatbelts and bullrack of your computer.
3. Start saving money for a replacement disk.
4. When the disk dies within the warranty period, try to erase it by writing bit patterns to it with the [Disk Utility](http://en.wikipedia.org/wiki/Disk_Utility). If this succeeds and you are satisfied that your data is [erased to a reasonable degree](http://www.whitecanyon.com/newsletter-hard-drive-erase-multiple-overwrites.php#Article), go find your receipt, go to the store and try to get it repaired.
5. Bullet 4 is very unlikely to happen, because if you can write bits to a drive, you can use it. So, by the time you read this, the drive probably contains sensitive data, but you can't access the drive. No way to delete data there. The only option you have now is to [Slag your Drive](http://driveslag.eecue.com/), get the money you saved for a new one and buy a new one. Chances are that you can buy a bigger drive for the same money.
6. Restore your backups on the new drive and start saving for your next one.
7. Always try to use your new drive as the backup drive, and your old drive as the data drive. This gives you the advantage of your backup drive not being likely to fail, and because it is bigger, will easily hold (multiple) copies of the data stored on your data drive.
&lt;/code>&lt;/pre>
&lt;p>Back to my faulty drive: I connected it to my desktop Mac Mini (Intel) and it mounted, and did not seem to have any problems at all. I ran a diskcheck and listened to it for a while. No problems, nice sound. I reconnected it to the fileserver. Every sign of the problems I had earlier dissapeared. The only thing I could think of is to remove the cheap Trust USB hub because I ad USB trouble a few weeks ago, and I was suspecting that the drive access troubles could very well be caused by the cheap hub. Let's see if that does the trick.&lt;/p>
&lt;p>One other thing to remember, is that CD's and DVD's written on a computer &lt;a href="http://forums.cnet.com/5208-10149_102-0.html?forumID=7&amp;amp;threadID=152618&amp;amp;messageID=1698511">will not hold their data forever&lt;/a>, so they are too unreliable as backup media. A second harddisk is more reliable, because the magnetic information can be retrieved long after it has been written. Personally I backup to a spare harddisk daily (automatic) and every once in a while I do a manual backup to a third drive just to ease my mind.&lt;/p>
&lt;p>For good measure I have an automatic off-site backup in the making, and I have a proof of concept working where I share an AFP:// share over an SSL connection, and backup into an encrypted DMG at the remote location. The owner of the remote computer can not see my data, and by only connecting with private/public keys using SSL the data is fairly safe from being stolen. The scripts need polishing, but in effect are no different than my local daily incremental rsync backup. I will always have an extra copy stored far away from my home.&lt;/p>
&lt;p>Even a fire does not hurt me now, and scanning important documents becomes interesting, beause even if they get lost in a fire, you can &amp;quot;prove&amp;quot; to the insurance company that you had a policy, how much it was worth and what the insurancenumber was.&lt;/p></description></item><item><title>AFP breaks when messing with your Public folder!</title><link>https://realrolfje.github.io/rolfje.com/2007/10/04/afp-breaks-when-messing-with-your-public-folder/</link><pubDate>Thu, 04 Oct 2007 18:53:00 +0000</pubDate><guid>https://realrolfje.github.io/rolfje.com/2007/10/04/afp-breaks-when-messing-with-your-public-folder/</guid><description>
&lt;p>Hi, just a quick reminder to myself and users of the AFP protocol (Apple File Protocol) who are wondering why it is not working. For some strange reason, if you start messing (deleting) the &amp;quot;Public&amp;quot; folder of any user which is on the system providing the AFP share, you will break the AFP protocol.&lt;/p>
&lt;!-- more -->I just deleted the Public folder from user A because I didn't want that user to have one. When I tried to connect to the server with user B, I got an AFP error. When I removed user A from the system, AFP worked again. I still have to figure out how to granulary disable drop boxes in the future, for now I'll leave them be I guess.
&lt;p>Why all this hassle? Renewed interest in remote backup I guess. I just found out that:&lt;/p>
&lt;pre>&lt;code> * You can easily tunnel AFP over SSH
* If you mount a remote 8GB AES encrypted DMG file, the file will not be transferred in its entirety over the network connection
* If you write 100kB into the mounted 8GB DMG, it does not write 8GB, but only 100kb+directory update.
&lt;/code>&lt;/pre>
&lt;p>According to these observations, it should be able to make a 200GB DMG file on a remote machine, tunnel AFP over SSH and access it as a local disk with reaonable performance, even over an ADSL connection. This will pave the way for an automated rsync backup solution which could actually work, without special tooling or complex scripting.&lt;/p></description></item></channel></rss>